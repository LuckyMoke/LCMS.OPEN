if(!LCMS||typeof LCMS!="object"){var LCMS={}}LCMS.util={loading:function(type,index){switch(type){case"close":index?layer.close(index):layer.closeAll("loading");break;default:return layer.load(2,{shade:[0.3,"#fff"]});break}},notify:function(opt){opt=opt||{};if(opt.content){switch(opt.type){case"error":layer.msg(opt.content,{icon:2,anim:6,time:1000});break;default:layer.msg(opt.content,{icon:1,time:1000});break}}},load:function(opt){opt=opt||{};var tag,canLoad=true;if(opt.src)switch(opt.type){case"css":$("head").append('<link rel="stylesheet" href="'+opt.src+'">');break;case"js":$.ajaxSetup({async:opt.async!==false?true:false,cache:true});if(opt.elem&&opt.elem.length<=0){canLoad=false}tag=opt.src.search("\\?")!=-1?"&":"?";canLoad&&$.getScript(opt.src);$.ajaxSetup({async:true,cache:false});break}},ajax:function(opt){opt=Object.assign({type:"GET",data:{},dataType:"json",async:true,cache:false,success:function(res){},loading:false},opt||{});if(opt.timeout==undefined||opt.timeout===""){opt.timeout=15000}else if(opt.timeout===0||opt.timeout==="0"){opt.timeout=0}else{opt.timeout=opt.timeout*1}if(opt.type=="POST"||opt.loading){var layeri=LCMS.util.loading()}if(opt.type=="GET"&&opt.data){for(const key in opt.data){opt.url+="&"+key+"="+opt.data[key]}opt.data={}}$.ajax({url:opt.url,data:opt.data,type:opt.type,dataType:opt.dataType,async:opt.async,cache:opt.cache,timeout:opt.timeout,success:function(res){opt.success(res)},error:function(err){if(opt.error){opt.error({code:0,msg:"数据加载失败",data:err})}else{opt.success({code:0,msg:"数据加载失败",data:err})}},complete:function(){LCMS.util.loading("close",layeri);opt.complete&&opt.complete()},})},randStr:function(len,type){len=len||4;switch(type){case"num":case"number":var chars="0123456789";break;case"let":case"letter":var chars="ABCDEFGHJKMNPQRSTWXYZ";break;default:var chars="ABCDEFGHJKMNPQRSTWXYZ23456789";break}var str="";for(var i=0;i<len;i++){str+=chars.charAt(Math.floor(Math.random()*chars.length))}return str},iframe:function(opt){opt=opt||{};opt=Object.assign({do:"open",title:" ",area:"",maxmin:true,resize:true,scrollbar:true,reload:false,_this:self},opt);switch(opt.do){case"close":parent.layer.close(parent.layer.getFrameIndex(window.name));opt.reload&&parent.location.reload();break;case"max":parent.layer.full(parent.layer.getFrameIndex(window.name));break;default:opt.area=opt.area||["900px","650px"];var width=$(opt._this).width(),height=$(opt._this).height();if(typeof opt.area=="object"){if(opt.area[0].replace("px","")>width){opt.area[0]="100%"}if(opt.area[1].replace("px","")>height){opt.area[1]="100%"}}else{if(opt.area.replace("px","")>width){opt.area="100%"}}return opt._this.layer.open({id:"LCMSLAYERIFRAME"+LCMS.util.randStr(4),type:opt.type?opt.type:opt.url.indexOf("<div")!==-1?1:2,title:opt.title,content:opt.url,area:opt.area,maxmin:opt.maxmin,resize:opt.resize,scrollbar:opt.scrollbar,shade:opt.shade>0?0.3:0,success:function(layero,index){opt._this.layer.setTop(layero)},});break}},tpl:function(tpl,arr){if(!tpl)return"";for(var key in arr){var reg="/{"+key+"}/g";arr[key]=arr[key]?arr[key]:"";tpl=tpl.replace(eval(reg),arr[key])}return tpl},sleep:function(time){var start=new Date().getTime();while(new Date().getTime()-start<time){continue}},getQuery:function(name,url){url=url?new URL(url).search:location.search;var paras=new URLSearchParams(url);return paras.get(name)},changeUrl:function(url,arg,arg_val){var pattern=arg+"=([^&]*)";var replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return url.replace(eval(tmp),replaceText)}else{if(url.match("[?]")){return url+"&"+replaceText}else{return url+"?"+replaceText}}},getDate:function(fmt,date){date=date||new Date();let ret,opt={"Y+":date.getFullYear().toString(),"m+":(date.getMonth()+1).toString(),"d+":date.getDate().toString(),"H+":date.getHours().toString(),"i+":date.getMinutes().toString(),"s+":date.getSeconds().toString()};for(let k in opt){ret=new RegExp("("+k+")").exec(fmt);if(ret){fmt=fmt.replace(ret[1],ret[1].length==1?opt[k]:opt[k].padStart(ret[1].length,"0"))}}return fmt},play:function(opt){opt=Object.assign({type:"audio",src:"",loop:0},opt||{});if(opt.src)switch(opt.type){case"audio":var audio=new Audio();audio.src=src;audio.loop=loop==1?1:0;audio.preload="meta";audio.play();return audio;break}},inUa:function(ua){ua=ua?ua:"micromessenger";if(window.navigator.userAgent.toLowerCase().indexOf(ua.toLowerCase())!=-1){return true}else{return false}},speak:function(text){if("speechSynthesis"in window&&typeof SpeechSynthesisUtterance=="function"){window.speechSynthesis.speak(new SpeechSynthesisUtterance(text))}},};var LJS={_loadstart:function(){return LCMS.util.loading()},_loadend:function(index){LCMS.util.loading("close",index)},_tips:function(msg,type){LCMS.util.notify({type:type===0?"error":"success",content:msg})},_get:function(url,callback,type,timeout){LCMS.util.ajax({type:"GET",url:url,dataType:type?type:"html",timeout:timeout,success:function(res){callback&&callback(res)},})},_post:function(url,data,callback,type,timeout){LCMS.util.ajax({type:"POST",url:url,data:data,dataType:type,timeout:timeout,success:function(res){callback&&callback(res)},})},_getjs:function(url,callback,asy){LCMS.util.load({type:"js",src:url,async:asy?false:true})},_tpl:function(tpl,arr){return LCMS.util.tpl(tpl,arr)},_iframe:function(url,title,area,shade,_this){return LCMS.util.iframe({title:title,url:url,shade:shade,area:area,_this:_this?_this:self})},_lazydo:function(callback,t){setTimeout(function(){callback&&typeof callback==="function"&&callback()},t?t:1000)},_lazyload:function(imgs){setTimeout(function(){imgs=imgs?imgs:$("img.lazyload");imgs.css("opacity","1");if(imgs.length>0){$("head").append('<style type="text/css">img.lazyload{-o-object-fit:scale-down;object-fit:scale-down;max-width:20px!important;max-height:20px!important;margin:auto;display:block;opacity:0;}</style>');imgs.lazyload({data_attribute:"src",effect:"fadeIn",threshold:200,failure_limit:10,skip_invisible:false})}},10)},_lazylunbo:function(imgs){setTimeout(function(){imgs=imgs?imgs:$("img.lazylunbo");if(imgs.length>0){$("head").append('<style type="text/css">img.lazylunbo{-o-object-fit:scale-down;object-fit:scale-down;max-width:20px!important;max-height:20px!important;margin:auto;display:block;opacity:0;}</style>');imgs.each(function(){var that=$(this);var src=that.attr("data-src");var placeholder="data:image/gif;base64,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";that.attr("src",placeholder).css("opacity","1");var img=new Image();img.src=src;img.onload=function(){that.animate({opacity:"0"},50,"",function(){that.attr("src",src)});setTimeout(function(){that.animate({opacity:"1"},100).removeClass("lazylunbo")},51)}})}},10)},};typeof layer!="object"&&LCMS.util.load({type:"js",src:"/public/static/layer/layer.js?v=3.5.1",async:false});typeof $().lazyload!="function"&&LCMS.util.load({type:"js",src:"/public/static/plugin/lazyload.min.js",async:false});