LCMS.util.tplx("login_qrcode",{userList:[],userNow:{},showMenu:false,showDialog:false,init(){this.getUsers()},getUsers(){LCMS.util.ajax({type:"GET",url:`${LCMS.url.now}&a=users`,loading:true,success:res=>{this.userList=res.data||[]}})},choseUser(user){this.userNow=user;this.menuClick("open")},menuClick(action){switch(action){case"open":this.showMenu=true;break;case"close":this.showMenu=false;this.showDialog=false;break;case"login":LCMS.util.ajax({type:"POST",url:`${LCMS.url.now}&a=login`,data:{token:this.userNow.token},success:res=>{if(res.code=1){LCMS.util.notify({content:res.msg});setTimeout((()=>{window.location.reload()}),1000)}else{LCMS.util.notify({type:"error",content:res.msg})}}});break;case"unband":this.showMenu=false;this.showDialog=true;break;case"gounband":this.showDialog=false;LCMS.util.ajax({type:"POST",url:`${LCMS.url.now}&a=unband`,data:{name:this.userNow.name},success:res=>{if(res.code=1){LCMS.util.notify({content:res.msg});setTimeout((()=>{this.getUsers()}),1000)}else{LCMS.util.notify({type:"error",content:res.msg})}}});break}}});